(this.webpackJsonpthe_phonebook=this.webpackJsonpthe_phonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),u=n.n(c),o=n(6),l=n(2),i=n.n(l),m=n(4),f=n(3),s=n(5),d=n.n(s),h="/api/persons",p=function(e){return d.a.get(h).then((function(e){return e.data}))},b=function(e){return d.a.post(h,e).then((function(e){return e.data}))},E=function(e,t){return d.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){return d.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var t=e.filter,n=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"filter shown with: "),r.a.createElement("input",{value:t,onChange:n}))},w=function(e){var t=e.submit,n=e.name,a=e.number,c=e.onNameChange,u=e.onNumberChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"name: "),r.a.createElement("td",null,r.a.createElement("input",{value:n,onChange:c}))),r.a.createElement("tr",null,r.a.createElement("td",null,"phone: "),r.a.createElement("td",null,r.a.createElement("input",{value:a,onChange:u}))))),r.a.createElement("button",{type:"submit"},"add"))},j=function(e){var t=e.person,n=e.deleteById;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(t.name," ?"))&&n(t)}},"delete")))},y=function(e){var t=e.filter,n=e.persons,a=e.deleteById,c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.number.toLowerCase().includes(t.toLowerCase())}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),r.a.createElement("table",{className:"numbers_table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"Number"),r.a.createElement("td",null))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement(j,{key:e.name,person:e,deleteById:a})})))))},O=function(e){var t=e.message;return t?r.a.createElement("div",{className:t.isError?"error":"notification"},t.content):null},k=function(){return r.a.createElement("div",{style:{marginTop:20,textAlign:"center",color:"",fontStyle:"italic",fontSize:16}},r.a.createElement("em",null,"phonebook app, sean_matro @ 2020"))},C=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),l=Object(f.a)(u,2),s=l[0],d=l[1],h=Object(a.useState)(""),j=Object(f.a)(h,2),C=j[0],N=j[1],x=Object(a.useState)(""),S=Object(f.a)(x,2),B=S[0],I=S[1],L=Object(a.useState)(),_=Object(f.a)(L,2),T=_[0],A=_[1],D=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:s,number:C},e.next=3,b(t).then((function(e){c(n.concat(e)),d(""),N(""),P("Note that the information of ".concat(e.name," added"))})).catch((function(e){q(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.find((function(e){return e.name===s})),a=Object(o.a)(Object(o.a)({},t),{},{number:C}),e.next=4,E(a.id,a).then((function(e){c(n.map((function(t){return t.name!==s?t:e}))),P("Note that the information of ".concat(e.name," updated"))})).catch((function(e){q(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().then((function(e){c(e)})).catch((function(e){q(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t.id).then((function(e){c(n.filter((function(e){return e.id!==t.id}))),P("Note that the information of ".concat(t.name," deleted"))})).catch((function(e){q("".concat(t.name," was already removed from server.")),c(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){q(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){A({content:"Note that ".concat(e)}),setTimeout((function(e){return A(null)}),3e3)},q=function(e){A({isError:!0,content:"".concat(e)}),setTimeout((function(e){return A(null)}),3e3)};return Object(a.useEffect)((function(){J()}),[]),r.a.createElement("div",{className:"phonebook"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(O,{message:T}),r.a.createElement(g,{filter:B,onChange:function(e){I(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(w,{submit:function(e){e.preventDefault(),s&&C&&(n.map((function(e){return e.name})).includes(s)?window.confirm("".concat(s," is already added to phonebook, replace the older number with a new one?"))&&F():D())},name:s,number:C,onNameChange:function(e){d(e.target.value)},onNumberChange:function(e){N(e.target.value)}}),r.a.createElement(y,{filter:B,persons:n,deleteById:z}),r.a.createElement(k,null))};n(40);u.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ddc7fb84.chunk.js.map